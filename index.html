<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <title>MindGA â€“ Zeka Oyunu (AÃ§Ä±k Tema)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg:#f3f5fb;
      --card:#ffffff;
      --border:#d0d4e6;
      --text:#111827;
      --muted:#6b7280;
      --primary:#2563eb;
      --primary-dark:#1d4ed8;
      --accent:#f97316;
      --correct:#16a34a;
      --wrong:#dc2626;
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color:transparent;}
    body{
      margin:0;
      font-family:system-ui,Segoe UI,Roboto,Arial;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width:900px;
      margin:0 auto;
      padding:16px;
    }
    h1{margin:0 0 6px;font-size:24px}
    h2{margin:0 0 4px;font-size:18px}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:14px;
      margin-top:14px;
      box-shadow:0 4px 10px rgba(15,23,42,.06);
    }
    .row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    input,button{
      font:inherit;
    }
    input{
      padding:8px 10px;
      border-radius:10px;
      border:1px solid var(--border);
      background:#f9fafb;
      color:var(--text);
      min-width:160px;
    }
    button{
      padding:8px 14px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background:var(--primary);
      color:white;
      font-weight:600;
      touch-action:manipulation;
    }
    button:active{transform:scale(.97);}
    .muted{color:var(--muted);font-size:13px}
    #currentPlayer{margin-top:6px}
    #game{margin-top:8px}
    #taskType{
      font-size:13px;
      color:var(--accent);
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.03em;
    }
    #question{
      margin:8px 0 10px;
      font-size:18px;
    }
    #options{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:8px;
    }
    .optBtn{
      background:#eef2ff;
      border:1px solid #c7d2fe;
      color:var(--text);
      border-radius:12px;
      padding:8px 14px;
      min-width:80px;
      text-align:center;
      cursor:pointer;
      touch-action:manipulation;
    }
    .optBtn.correct{
      background:#dcfce7;
      border-color:#86efac;
      color:#065f46;
      font-weight:700;
    }
    .optBtn.wrong{
      background:#fee2e2;
      border-color:#fecaca;
      color:#991b1b;
    }
    #feedback{
      min-height:22px;
      font-size:14px;
      margin-top:4px;
    }
    #hudSmall{
      font-size:14px;
      margin-top:4px;
    }
    #hudSmall span{font-weight:600}
    #leaderboard ol{
      padding-left:20px;
      margin:4px 0 0;
    }
    #leaderboard li{margin-bottom:3px;font-size:14px}
    #badgeList{
      padding-left:20px;
      margin:4px 0 0;
      font-size:14px;
    }
    #badgeList li{margin-bottom:3px}
    @media(max-width:640px){
      h1{font-size:20px}
      .wrap{padding:12px}
    }
  </style>
</head>
<body>
<div class="wrap">
  <!-- ÃœST: KullanÄ±cÄ± adÄ± ve durum -->
  <div class="card">
    <h1>MindGA â€“ Zeka Oyunu</h1>
    <p class="muted">
      KullanÄ±cÄ± adÄ±nÄ± yaz, sorularÄ± Ã§Ã¶z, puan ve seviye kazan. Skorunu liderlik tablosuna kaydedebilirsin. ğŸ®ğŸ§ 
    </p>
    <div id="login" class="row">
      <input id="userName" placeholder="KullanÄ±cÄ± adÄ±n" />
      <button id="startBtn">Oyuna BaÅŸla</button>
    </div>
    <div id="currentPlayer" class="muted" style="display:none">
      Oyuncu: <b id="playerLabel"></b> â€¢ Seviye: <b id="levelLabel">1</b> â€¢ Puan: <b id="scoreLabel">0</b> â€¢ Seri: <b id="streakLabel">0</b>
    </div>
  </div>

  <!-- OYUN ALANI -->
  <div id="game" class="card" style="display:none">
    <div id="taskType"></div>
    <div id="question"></div>
    <div id="options"></div>
    <div id="feedback" class="muted"></div>
    <div id="hudSmall" class="muted">
      DoÄŸru: <span id="correctLabel">0</span> â€¢ Ã‡Ã¶zÃ¼lmÃ¼ÅŸ soru: <span id="totalLabel">0</span>
    </div>
    <div class="row" style="margin-top:10px">
      <button id="nextBtn">Sonraki Soru</button>
      <button id="saveBtn" style="background:var(--accent);color:white">Skoru LiderliÄŸe Kaydet</button>
    </div>
  </div>

  <!-- LÄ°DERLÄ°K TABLOSU -->
  <div id="leaderboard" class="card">
    <h2>Liderlik Tablosu</h2>
    <p class="muted">En yÃ¼ksek 10 skor cihazÄ±nda saklanÄ±r.</p>
    <ol id="boardList"></ol>
  </div>

  <!-- ROZETLER -->
  <div id="badgesCard" class="card">
    <h2>Rozetler</h2>
    <ul id="badgeList"></ul>
    <p class="muted">
      Ã–rnek rozetler: <b>Ä°lk AdÄ±m</b> (ilk doÄŸru), <b>Seri UstasÄ±</b> (3 doÄŸru arka arkaya),
      <b>Zihin UstasÄ±</b> (100+ puan), <b>Ã‡oklu Zeka</b> (en az 3 farklÄ± gÃ¶rev tÃ¼rÃ¼).
    </p>
  </div>
</div>

<script>
  const $ = s => document.querySelector(s);

  const state = {
    name:"",
    score:0,
    level:1,
    streak:0,
    correctCount:0,
    totalCount:0,
    typesUsed:{},
    badges:[],
    leaderboard:[]
  };

  // LocalStorage'dan yÃ¼kle
  (function loadStored(){
    try{
      const lb = localStorage.getItem("mindga_leaderboard");
      const bd = localStorage.getItem("mindga_badges");
      if(lb) state.leaderboard = JSON.parse(lb);
      if(bd) state.badges      = JSON.parse(bd);
    }catch(e){}
  })();

  function saveStored(){
    try{
      localStorage.setItem("mindga_leaderboard", JSON.stringify(state.leaderboard));
      localStorage.setItem("mindga_badges", JSON.stringify(state.badges));
    }catch(e){}
  }

  function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
  function shuffle(arr){return arr.sort(()=>Math.random()-.5);}
  function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}

  function updateHud(){
    $("#playerLabel").textContent = state.name;
    $("#scoreLabel").textContent  = state.score;
    $("#levelLabel").textContent  = state.level;
    $("#streakLabel").textContent = state.streak;
    $("#correctLabel").textContent= state.correctCount;
    $("#totalLabel").textContent  = state.totalCount;
  }

  // GÃ¶revler
  function makeLogicTask(){
    const a=rand(2,15), b=rand(2,10);
    const ops=["+","-","Ã—"];
    const op = pick(ops);
    let ans;
    if(op==="+") ans=a+b;
    else if(op==="-") ans=a-b;
    else ans=a*b;
    const w1 = ans+rand(1,3);
    const w2 = ans-rand(1,3);
    const opts = shuffle([ans,w1,w2]);
    return {
      typeLabel:"MantÄ±k-Matematik ZekÃ¢sÄ±",
      question:`${a} ${op} ${b} = ?`,
      options:opts,
      correct:ans
    };
  }

  function makeVerbalTask(){
    const bank=[
      {def:"KÄ±sa ve Ã¶z anlatÄ±m",word:"veciz"},
      {def:"Bir sorunu Ã§Ã¶zmek iÃ§in izlenen yÃ¶ntem",word:"strateji"},
      {def:"Derin dÃ¼ÅŸÃ¼nme",word:"tefekkÃ¼r"},
      {def:"Bir iÅŸi yapma gÃ¼cÃ¼ / yetenek",word:"kabiliyet"}
    ];
    const pickW = pick(bank);
    const wrongs = shuffle(bank.filter(x=>x.word!==pickW.word)).slice(0,2).map(x=>x.word);
    const opts = shuffle([pickW.word, ...wrongs]);
    return {
      typeLabel:"SÃ¶zel-Dil ZekÃ¢sÄ±",
      question:pickW.def,
      options:opts,
      correct:pickW.word
    };
  }

  function makeMemoryTask(){
    const emoji = pick(["â­","ğŸ”º","ğŸ”µ","ğŸŸ¢"]);
    const count = rand(2,5);
    const seq = emoji.repeat(count);
    const opts = shuffle([count, count+1, Math.max(1,count-1)]);
    return {
      typeLabel:"GÃ¶rsel-HafÄ±za ZekÃ¢sÄ±",
      question:`Dizide (${seq}) kaÃ§ adet ${emoji} vardÄ±?`,
      options:opts,
      correct:count
    };
  }

  function makeAttentionTask(){
    const base = pick(["A","B","C","D"]);
    const odd  = pick(["X","Y","Z"]);
    const arr  = shuffle([base,base,base,odd]);
    return {
      typeLabel:"Dikkat-HÄ±z ZekÃ¢sÄ±",
      question:"AÅŸaÄŸÄ±dakilerden hangisi diÄŸerlerinden farklÄ±?",
      options:arr,
      correct:odd
    };
  }

  function createTask(){
    const makers=[makeLogicTask,makeVerbalTask,makeMemoryTask,makeAttentionTask];
    const maker = pick(makers);
    const task  = maker();

    state.typesUsed[task.typeLabel] = true;
    state.totalCount++;

    $("#taskType").textContent = task.typeLabel;
    $("#question").textContent = task.question;
    $("#feedback").textContent = "";
    const box = $("#options");
    box.innerHTML = "";
    box.dataset.active = "1";

    task.options.forEach(val=>{
      const btn=document.createElement("button");
      btn.textContent = val;
      btn.className   = "optBtn";
      btn.onclick = ()=>handleAnswer(val, task.correct, btn);
      box.appendChild(btn);
    });

    updateHud();
  }

  function handleAnswer(given, correct, btn){
    if($("#options").dataset.active !== "1") return;
    $("#options").dataset.active = "0";

    const buttons = document.querySelectorAll(".optBtn");
    buttons.forEach(b=>{
      if(String(b.textContent)===String(correct)) b.classList.add("correct");
    });

    if(String(given)===String(correct)){
      state.score += 10;
      state.correctCount++;
      state.streak++;
      $("#feedback").textContent = pick([
        "DoÄŸru cevap! ğŸ‰",
        "Harika gidiyorsun! ğŸ˜",
        "ZekÃ¢n parlÄ±yor! ğŸ’¡"
      ]);
      if(state.streak>=3){
        $("#feedback").textContent += " â€¢ Seri yakaladÄ±n! ğŸ”¥";
      }
      const newLevel = 1 + Math.floor(state.score/40);
      if(newLevel>state.level){
        state.level=newLevel;
        $("#feedback").textContent += ` â€¢ Seviye ${state.level} oldun! â¬†ï¸`;
      }
      checkBadges();
    }else{
      state.streak=0;
      btn.classList.add("wrong");
      $("#feedback").textContent = pick([
        "Bu kez olmadÄ±, tekrar dene! ğŸ™‚",
        "Hata normal, pes etme! ğŸ’ª"
      ]);
    }
    updateHud();
  }

  // Rozet kontrol
  function addBadge(id){
    if(!state.badges.includes(id)){
      state.badges.push(id);
      renderBadges();
      saveStored();
    }
  }

  function checkBadges(){
    if(state.correctCount>=1)  addBadge("ilk");
    if(state.streak>=3)       addBadge("seri");
    if(state.score>=100)      addBadge("zihin");
    if(Object.keys(state.typesUsed).length>=3) addBadge("coklu");
  }

  function renderBadges(){
    const ul=$("#badgeList");
    ul.innerHTML="";
    if(!state.badges.length){
      ul.innerHTML="<li>HenÃ¼z rozet yok. OynadÄ±kÃ§a aÃ§Ä±lacak. ğŸ…</li>";
      return;
    }
    state.badges.forEach(id=>{
      let text="";
      if(id==="ilk")   text="Ä°lk AdÄ±m â€“ Ä°lk doÄŸru cevabÄ±nÄ± verdin.";
      if(id==="seri")  text="Seri UstasÄ± â€“ Art arda 3 doÄŸru.";
      if(id==="zihin") text="Zihin UstasÄ± â€“ 100+ puan.";
      if(id==="coklu") text="Ã‡oklu Zeka â€“ En az 3 farklÄ± gÃ¶rev tÃ¼rÃ¼ Ã§Ã¶zdÃ¼n.";
      const li=document.createElement("li");
      li.textContent=text;
      ul.appendChild(li);
    });
  }

  // Liderlik
  function renderBoard(){
    const ol=$("#boardList");
    ol.innerHTML="";
    if(!state.leaderboard.length){
      const li=document.createElement("li");
      li.className="muted";
      li.textContent="HenÃ¼z kayÄ±tlÄ± skor yok.";
      ol.appendChild(li);
      return;
    }
    const copy = state.leaderboard.slice().sort((a,b)=>b.score-a.score).slice(0,10);
    copy.forEach((r,i)=>{
      const li=document.createElement("li");
      li.textContent=`${i+1}. ${r.name} â€“ ${r.score} puan`;
      ol.appendChild(li);
    });
  }

  function saveScore(){
    if(!state.name){
      alert("Ã–nce kullanÄ±cÄ± adÄ±yla oyuna baÅŸla.");
      return;
    }
    state.leaderboard.push({name:state.name, score:state.score});
    saveStored();
    renderBoard();
    alert("Skorun liderlik tablosuna kaydedildi. ğŸ†");
  }

  // Olaylar
  $("#startBtn").onclick = ()=>{
    const name=$("#userName").value.trim();
    if(!name){
      alert("LÃ¼tfen bir kullanÄ±cÄ± adÄ± yaz.");
      return;
    }
    state.name=name;
    state.score=0;
    state.level=1;
    state.streak=0;
    state.correctCount=0;
    state.totalCount=0;
    state.typesUsed={};
    $("#currentPlayer").style.display="block";
    $("#game").style.display="block";
    createTask();
  };

  $("#nextBtn").onclick = ()=>createTask();
  $("#saveBtn").onclick = ()=>saveScore();

  // Ä°lk ekran: liderlik & rozetleri Ã§iz
  renderBoard();
  renderBadges();
  updateHud();
</script>
</body>
</html>
